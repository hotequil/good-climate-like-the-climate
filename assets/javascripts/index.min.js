"use strict";var firstGet=!1,myKey="3b4ebde1",userIP=void 0,lat=void 0,lon=void 0,x=void 0,pageLoader=void 0,loader=void 0,info={},errors=[],errorMessage=void 0,solutionFooter=void 0,header=void 0,main=void 0,title=void 0,titleTime=void 0,titleDegrees=void 0,cityName=void 0,maxAndMin=void 0,accordion=void 0,currentPage=void 0,today=void 0,details=void 0,week=void 0,about=void 0,menuClimate=void 0,elemsMenu=[],pages=["hoje","detalhes","semana","sobre"],sunrise=void 0,sunset=void 0,windSpeedy=void 0,humidity=void 0,description=void 0,currently=void 0,conditionSlug=void 0,conditionCode=void 0,unstackableTable=void 0,conditions={0:"Tempestade forte",1:"Tempestade tropical",2:"Furacão",3:"Tempestades severas",4:"Tempestades",5:"Misto de neve e chuva",6:"Misto chuva e gelo",7:"Misto neve e gelo",8:"Geada fina",9:"Chuviscos",10:"Congelamento chuva",11:"Alguns chuviscos",12:"Alguns chuviscos",13:"Neve baixa",14:"Tempestade com neve",15:"Ventania com neve",16:"Neve",17:"Granizo",18:"Gelo",19:"Poeira",20:"Neblina",21:"Tempestade de areia",22:"Fumacento",23:"Vento acentuado",24:"Ventania",25:"Tempo frio",26:"Tempo nublado",27:"Tempo limpo",28:"Tempo nublado",29:"Parcialmente nublado",30:"Parcialmente nublado",31:"Tempo limpo",32:"Ensolarado",33:"Estrelado",34:"Ensolarado com muitas nuvens",35:"Misto chuva e granizo",36:"Ar quente",37:"Tempestades isoladas",38:"Trovoadas dispersas",39:"Trovoadas dispersas",40:"Chuvas esparsas",41:"Pesados neve",42:"Chuviscos com neve",43:"Neve pesada",44:"Sol com poucas nuvens",45:"Chuva",46:"Queda de neve",47:"Tempestades isoladas",48:"Serviço não disponível"},conditionsSlug={storm:"Tempestade",snow:"Neve",hail:"Granizo",rain:"Chuva",fog:"Neblina",clear_day:"Dia limpo",clear_night:"Noite limpa",cloud:"Nublado",cloudly_day:"Nublado de dia",cloudly_night:"Nublado de noite",none_day:"Dia",none_night:"Noite"};function calculate(){var e=$(".menu-climate");$(".main").css("height","calc(100% - ".concat(e.outerHeight()+"px",")")),calculateTable()}function calculateTable(){var e=$(".unstackable.table"),o=$(".main");e.css("max-height","calc(".concat(o.outerHeight()+"px"," - 4em)"))}$(document).ready(function(){pageLoader=$(".page-loader"),loader=$(".loader"),errorMessage=$(".error.message"),solutionFooter=$(".solution-footer"),header=$(".header"),main=$(".main"),title=$(".title"),titleTime=$(".title-time"),titleDegrees=$(".title-degrees"),cityName=$(".city-name"),maxAndMin=$(".max-and-min"),accordion=$(".content-time .ui.accordion"),today=$(".today"),details=$(".details"),week=$(".week"),about=$(".about"),elemsMenu=[today,details,week,about],menuClimate=$('.menu-climate a[href^="#"]'),sunrise=$(".sunrise"),sunset=$(".sunset"),windSpeedy=$(".wind-speedy"),humidity=$(".humidity"),description=$(".description"),currently=$(".period"),conditionSlug=$(".condition-slug"),conditionCode=$(".condition-code"),unstackableTable=$(".unstackable.table"),pageLoader.removeClass("display-none"),moment.locale("pt-BR"),calculate(),$(window).resize(function(){calculate()}),putText(loader,"Carregando"),elemFocus(loader),getIp()});var getIp=function(){$.getJSON("https://api.ipify.org?format=jsonp&callback=?").done(function(e){userIP=e.ip,getLocation()}).fail(function(e){createError("Ocorreu uma falha ao obter o seu IP.","<strong>Solução:</strong> recarregue a página.")})},getLocation=function(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(getPosition,createError,{enableHighAccuracy:true}),putText(loader,"Esperando permissão do usuário"),elemFocus(loader)):createError("A geolocalização não é suportada nesse navegador.","<strong>Solução:</strong> atualize seu navegador ou troque de navegador.")},getPosition=function e(o,a,t){putText(loader,"Exibindo informações"),elemFocus(loader),lat=o.coords.latitude,lon=o.coords.longitude;var n={key:myKey,lat:lat,lon:lon,user_ip:userIP,locale:"pt",format:"json-cors"};$.get("https://api.hgbrasil.com/weather",n).done(function(o){info=o,putCurrentTime(),showInfo(info),setInterval(function(){e({coords:{latitude:lat,longitude:lon}})},6e4)}).fail(function(e){createError("Ocorreu uma falha ao obter a sua localização.","<strong>Solução:</strong> recarregue a página.")})},createError=function(e,o){var a=o||"";if(e.code)switch(e.code){case e.PERMISSION_DENIED:errors.push("Você rejeitou a permissão de geolocalização."),a="<strong>Solução:</strong> permita o uso de localização no seu navegador e recarregue a página.";break;case e.POSITION_UNAVAILABLE:errors.push("Ocorreu uma falha ao obter a sua geolocalização."),a="<strong>Solução:</strong> recarregue a página.";break;case e.TIMEOUT:errors.push("O tempo para obter a permissão de geolocalização expirou."),a="<strong>Solução:</strong> recarregue a página.";break;case e.UNKNOWN_ERROR:errors.push("Ocorreu uma falha desconhecida."),a="<strong>Solução:</strong> recarregue a página.";break;default:errors.push("Ocorreu uma falha desconhecida."),a="<strong>Solução:</strong> recarregue a página."}else errors.push(e);putErrors(errors,!0,!1,a),elemFocus(errorMessage.find(".header")),errors=[]},showInfo=function(e,o){setTimeout(function(){putInfo(e)},o||1e3)},keydownCityName=function(){$(title,cityName).keydown(function(e){13===e.keyCode&&(accordion.accordion("toggle",0),setTimeout(function(){accordion.find(".content").hasClass("active")&&elemFocus(titleTime)},500))})},clickCityName=function(){$(title,cityName).click(function(e){setTimeout(function(){accordion.find(".content").hasClass("active")&&elemFocus(titleTime)},500)})},closeAccordion=function(){$(document).click(function(e){!$(e.target).hasClass("title-time")&&titleTime.hasClass("visible")&&(accordion.accordion("close",0),elemFocus(cityName))})},blurAccordion=function(){titleTime.blur(function(e){accordion.accordion("close",0)})},dropdownClick=function(){$(".title .dropdown.icon").click(function(){elemFocus(cityName)})},elemFocus=function(e,o){setTimeout(function(){return e.focus()},o||250)},putText=function(e,o){e.text(o)},putErrors=function(e,o,a,t){e.forEach(function(e){errorMessage.find(".list").append('<li tabindex="0">'.concat(e,"</li>"))}),e.length>1?errorMessage.find(".header .header-error").text("Tivemos problemas"):errorMessage.find(".header .header-error").text("Tivemos um problema"),solutionFooter.find(".solution").html(t),o?(loader.addClass("display-none"),errorMessage.removeClass("display-none"),elemFocus(errorMessage.find(".header .header-error"))):(errorMessage.addClass("display-none"),loader.removeClass("display-none"))},putInfo=function(e){contentsOnView(e),showViews(),firstGet||(calculate(),initAccordions(),keydownCityName(),clickCityName(),closeAccordion(),blurAccordion(),dropdownClick(),choosePage(),firstGet=!0)},putCurrentTime=function(){setInterval(function(){titleTime.text("".concat(moment().format("dddd"),", dia ").concat(moment().format("LL")," às ").concat(moment().format("LTS")))},500)},initAccordions=function(){$(".ui.accordion").accordion()},choosePage=function e(o){(!o||!currentPage||currentPage!=o)&&(o?currentPage=o:(pages.forEach(function(e){location.hash.includes(e)&&(currentPage=e)}),currentPage||(currentPage=pages[0],location.hash="#".concat(currentPage))),unstackableTable.addClass("opacity-none"),elemsMenu.forEach(function(e){e.hasClass("week")||e.addClass("opacity-none")}),menuClimate.removeClass("active"),$('a[href="#'+currentPage+'"]').addClass("active"),setTimeout(function(){switch(elemsMenu.forEach(function(e){return e.addClass("display-none")}),currentPage){case"hoje":today.removeClass("opacity-none display-none"),elemFocus(titleDegrees);break;case"detalhes":details.removeClass("opacity-none display-none"),elemFocus(currently.find(".title-period"));break;case"semana":week.removeClass("opacity-none display-none"),unstackableTable.removeClass("opacity-none"),elemFocus(unstackableTable.find("th:first-child"));break;case"sobre":about.removeClass("opacity-none display-none"),elemFocus($(".header.link-header"))}},500),menuClimate.click(function(o){e(o.target.hash.replace("#",""))}))},showViews=function(){header.removeClass("display-none"),main.removeClass("display-none"),pageLoader.addClass("opacity-none"),setTimeout(function(){pageLoader.addClass("display-none")},1e3)},contentsOnView=function(e){titleDegrees.text("".concat(e.results.temp,"°")),cityName.text(e.results.city),maxAndMin.text("".concat(e.results.forecast[0].min,"° e ").concat(e.results.forecast[0].max,"°")),currently.find(".title-period").text(e.results.currently||"Sem informação"),sunrise.find(".value").text(moment(e.results.sunrise,"hh:mm A").format("HH:mm")||"Sem informação"),sunset.find(".value").text(moment(e.results.sunset,"hh:mm A").format("HH:mm")||"Sem informação"),windSpeedy.find(".value").text(e.results.wind_speedy.replace(".",",")||"Sem informação"),humidity.find(".value").text("".concat(e.results.humidity||0,"%")||"Sem informação"),conditionSlug.find(".value").text(conditionsSlug[e.results.condition_slug]||"Sem informação"),conditionCode.find(".value").text(conditions[e.results.condition_code]||e.results.description||"Sem informação"),createTable(e.results.forecast)},createTable=function(e){unstackableTable.find("tbody").html(""),e.forEach(function(e,o){unstackableTable.find("tbody").append('<tr><td tabindex="0" data-label="Data">'.concat(e.date," (").concat(e.weekday,'.)</td><td tabindex="0" data-label="Mín.">').concat(e.min,'°</td><td tabindex="0" data-label="Máx.">').concat(e.max,'°</td><td tabindex="0" data-label="Descrição">').concat(e.description," (").concat(conditionsSlug[e.condition],")</td></tr>"))})};